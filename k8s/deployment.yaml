# # # # ----------------------------------------------------------
# # # # PVC (Not used â€” kept only because your original had it)
# # # # ----------------------------------------------------------
# # # apiVersion: v1
# # # kind: PersistentVolumeClaim
# # # metadata:
# # #   name: rednet-static-pvc
# # #   namespace: "2401069"
# # # spec:
# # #   accessModes:
# # #     - ReadWriteOnce
# # #   resources:
# # #     requests:
# # #       storage: 1Gi
# # # ---
# # # apiVersion: apps/v1
# # # kind: Deployment
# # # metadata:
# # #   name: rednet-deployment
# # #   namespace: "2401069"
# # # spec:
# # #   replicas: 1
# # #   selector:
# # #     matchLabels:
# # #       app: rednet
# # #   template:
# # #     metadata:
# # #       labels:
# # #         app: rednet
# # #     spec:
# # #       imagePullSecrets:
# # #         - name: nexus-secret
# # #       containers:
# # #         - name: rednet
# # #           image: nexus-service-for-docker-hosted-registry.nexus.svc.cluster.local:8085/2401069/rednet:v1
# # #           imagePullPolicy: Always

# # #           ports:
# # #             - containerPort: 3000

# # #           env:
# # #             - name: NODE_ENV
# # #               value: "production"

# # #             - name: JWT_SECRET
# # #               value: "XmpxMBqyicVFC+y74+VEw+d1SUz3gSxqBWpQ33DNGFs8JOIF99v/Qah3Rr18rVaYUjHu+g3Y5y4WzjzUdkZQvQ=="
# # #             - name: NEXT_PUBLIC_SUPABASE_URL
# # #               value: "https://nypverxdujpsdnyzktdm.supabase.co"

# # #             - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
# # #               value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55cHZlcnhkdWpwc2RueXprdGRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MjYyNjgsImV4cCI6MjA2NTIwMjI2OH0.0AlveeXieCvf5umY5JSvErhu96pbVPQwIKXTkIpKB-Q"

# # #           readinessProbe:
# # #             httpGet:
# # #               path: /
# # #               port: 3000
# # #             initialDelaySeconds: 5
# # #             periodSeconds: 10

# # #           livenessProbe:
# # #             httpGet:
# # #               path: /
# # #               port: 3000
# # #             initialDelaySeconds: 20
# # #             periodSeconds: 20

# # #           resources:
# # #             requests:
# # #               cpu: "250m"
# # #               memory: "256Mi"
# # #             limits:
# # #               cpu: "500m"
# # #               memory: "512Mi"
# # # ---
# # # apiVersion: v1
# # # kind: Service
# # # metadata:
# # #   name: rednet-service
# # #   namespace: "2401069"
# # # spec:
# # #   selector:
# # #     app: rednet
# # #   ports:
# # #     - protocol: TCP
# # #       port: 80
# # #       targetPort: 3000
# # #   type: ClusterIP
# # # ---
# # # apiVersion: networking.k8s.io/v1
# # # kind: Ingress
# # # metadata:
# # #   name: rednet-ingress
# # #   namespace: "2401069"
# # #   annotations:
# # #     nginx.ingress.kubernetes.io/rewrite-target: /
# # # spec:
# # #   ingressClassName: nginx
# # #   rules:
# # #     - host: 2401069.imcc.com
# # #       http:
# # #         paths:
# # #           - path: /
# # #             pathType: Prefix
# # #             backend:
# # #               service:
# # #                 name: rednet-service
# # #                 port:
# # #                   number: 80


# # apiVersion: v1
# # kind: Namespace
# # metadata:
# #   name: "2401069"
# # ---
# # apiVersion: v1
# # kind: PersistentVolumeClaim
# # metadata:
# #   name: rednet-static-pvc
# #   namespace: "2401069"
# # spec:
# #   accessModes:
# #     - ReadWriteOnce
# #   resources:
# #     requests:
# #       storage: 1Gi
# # ---
# # apiVersion: apps/v1
# # kind: Deployment
# # metadata:
# #   name: rednet-deployment
# #   namespace: "2401069"
# # spec:
# #   replicas: 1
# #   selector:
# #     matchLabels:
# #       app: rednet
# #   template:
# #     metadata:
# #       labels:
# #         app: rednet
# #     spec:
# #       imagePullSecrets:
# #         - name: nexus-secret
# #       containers:
# #         - name: rednet
# #           image: nexus-service-for-docker-hosted-registry.nexus.svc.cluster.local:8085/2401069/rednet:IMAGE_TAG
# #           imagePullPolicy: Always
# #           ports:
# #             - containerPort: 3000
# #           env:
# #             - name: NODE_ENV
# #               value: "production"
# #             - name: JWT_SECRET
# #               value: "XmpxMBqyicVFC+y74+VEw+d1SUz3gSxqBWpQ33DNGFs8JOIF99v/Qah3Rr18rVaYUjHu+g3Y5y4WzjzUdkZQvQ=="
# #             - name: NEXT_PUBLIC_SUPABASE_URL
# #               value: "https://nypverxdujpsdnyzktdm.supabase.co"
# #             - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
# #               value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55cHZlcnhkdWpwc2RueXprdGRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MjYyNjgsImV4cCI6MjA2NTIwMjI2OH0.0AlveeXieCvf5umY5JSvErhu96pbVPQwIKXTkIpKB-Q"
# #           resources:
# #             requests:
# #               cpu: "250m"
# #               memory: "256Mi"
# #             limits:
# #               cpu: "500m"
# #               memory: "512Mi"
# #           readinessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 5
# #             periodSeconds: 10
# #           livenessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 20
# #             periodSeconds: 20
# # ---
# # apiVersion: v1
# # kind: Service
# # metadata:
# #   name: rednet-service
# #   namespace: "2401069"
# # spec:
# #   type: ClusterIP
# #   selector:
# #     app: rednet
# #   ports:
# #     - protocol: TCP
# #       port: 80
# #       targetPort: 3000
# # ---
# # apiVersion: networking.k8s.io/v1
# # kind: Ingress
# # metadata:
# #   name: rednet-ingress
# #   namespace: "2401069"
# #   annotations:
# #     nginx.ingress.kubernetes.io/rewrite-target: /
# # spec:
# #   ingressClassName: nginx
# #   rules:
# #     - host: 2401069.imcc.com
# #       http:
# #         paths:
# #           - path: /
# #             pathType: Prefix
# #             backend:
# #               service:
# #                 name: rednet-service
# #                 port:
# #                   number: 80

# # apiVersion: apps/v1
# # kind: Deployment
# # metadata:
# #   name: rednet-deployment
# #   namespace: "2401069"
# # spec:
# #   replicas: 1
# #   selector:
# #     matchLabels:
# #       app: rednet
# #   template:
# #     metadata:
# #       labels:
# #         app: rednet
# #     spec:
# #       imagePullSecrets:
# #         - name: nexus-secret
# #       containers:
# #         - name: rednet
# #           image: nexus-service-for-docker-hosted-registry.nexus.svc.cluster.local:8085/2401069/rednet:${IMAGE_TAG}
# #           imagePullPolicy: Always
# #           ports:
# #             - containerPort: 3000
# #           env:
# #             - name: NODE_ENV
# #               value: "production"
# #             - name: JWT_SECRET
# #               value: "XmpxMBqyicVFC+y74+VEw+d1SUz3gSxqBWpQ33DNGFs8JOIF99v/Qah3Rr18rVaYUjHu+g3Y5y4WzjzUdkZQvQ=="
# #             - name: NEXT_PUBLIC_SUPABASE_URL
# #               value: "https://nypverxdujpsdnyzktdm.supabase.co"
# #             - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
# #               value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55cHZlcnhkdWpwc2RueXprdGRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MjYyNjgsImV4cCI6MjA2NTIwMjI2OH0.0AlveeXieCvf5umY5JSvErhu96pbVPQwIKXTkIpKB-Q"
# #           resources:
# #             requests:
# #               cpu: "100m"
# #               memory: "256Mi"
# #             limits:
# #               cpu: "500m"
# #               memory: "512Mi"
# #           readinessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 10
# #             periodSeconds: 10
# #           livenessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 30
# #             periodSeconds: 20
# # ---
# # apiVersion: v1
# # kind: Service
# # metadata:
# #   name: rednet-service
# #   namespace: "2401069"
# # spec:
# #   type: ClusterIP
# #   selector:
# #     app: rednet
# #   ports:
# #     - protocol: TCP
# #       port: 80
# #       targetPort: 3000
# # ---
# # apiVersion: networking.k8s.io/v1
# # kind: Ingress
# # metadata:
# #   name: rednet-ingress
# #   namespace: "2401069"
# #   annotations:
# #     nginx.ingress.kubernetes.io/rewrite-target: /
# # spec:
# #   ingressClassName: nginx
# #   rules:
# #     - host: 2401069.imcc.com
# #       http:
# #         paths:
# #           - path: /
# #             pathType: Prefix
# #             backend:
# #               service:
# #                 name: rednet-service
# #                 port:
# #                   number: 80


# # apiVersion: apps/v1
# # kind: Deployment
# # metadata:
# #   name: rednet-deployment
# #   namespace: "2401069"
# # spec:
# #   replicas: 1
# #   strategy:
# #     type: Recreate
# #   selector:
# #     matchLabels:
# #       app: rednet
# #   template:
# #     metadata:
# #       labels:
# #         app: rednet
# #     spec:
# #       imagePullSecrets:
# #         - name: nexus-secret
# #       terminationGracePeriodSeconds: 10
# #       containers:
# #         - name: rednet
# #           image: ${NEXUS_IP}:8085/2401069/rednet:${IMAGE_TAG}
# #           imagePullPolicy: Always
# #           ports:
# #             - containerPort: 3000
# #           env:
# #             - name: NODE_ENV
# #               value: "production"
# #             - name: JWT_SECRET
# #               value: "XmpxMBqyicVFC+y74+VEw+d1SUz3gSxqBWpQ33DNGFs8JOIF99v/Qah3Rr18rVaYUjHu+g3Y5y4WzjzUdkZQvQ=="
# #             - name: NEXT_PUBLIC_SUPABASE_URL
# #               value: "https://nypverxdujpsdnyzktdm.supabase.co"
# #             - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
# #               value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55cHZlcnhkdWpwc2RueXprdGRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MjYyNjgsImV4cCI6MjA2NTIwMjI2OH0.0AlveeXieCvf5umY5JSvErhu96pbVPQwIKXTkIpKB-Q"
# #           resources:
# #             requests:
# #               cpu: "100m"
# #               memory: "256Mi"
# #             limits:
# #               cpu: "1000m"
# #               memory: "1Gi"
# #           readinessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 30
# #             periodSeconds: 10
# #             timeoutSeconds: 5
# #             failureThreshold: 6
# #           livenessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 60
# #             periodSeconds: 20
# #             timeoutSeconds: 5
# #             failureThreshold: 6
# # ---
# # apiVersion: v1
# # kind: Service
# # metadata:
# #   name: rednet-service
# #   namespace: "2401069"
# # spec:
# #   type: ClusterIP
# #   selector:
# #     app: rednet
# #   ports:
# #     - protocol: TCP
# #       port: 80
# #       targetPort: 3000
# # ---
# # apiVersion: networking.k8s.io/v1
# # kind: Ingress
# # metadata:
# #   name: rednet-ingress
# #   namespace: "2401069"
# #   annotations:
# #     nginx.ingress.kubernetes.io/rewrite-target: /
# # spec:
# #   ingressClassName: nginx
# #   rules:
# #     - host: 2401069.imcc.com
# #       http:
# #         paths:
# #           - path: /
# #             pathType: Prefix
# #             backend:
# #               service:
# #                 name: rednet-service
# #                 port:
# # #                   number: 80



# # apiVersion: apps/v1
# # kind: Deployment
# # metadata:
# #   name: rednet-deployment
# #   namespace: "2401069"
# # spec:
# #   replicas: 1
# #   strategy:
# #     type: Recreate
# #   selector:
# #     matchLabels:
# #       app: rednet
# #   template:
# #     metadata:
# #       labels:
# #         app: rednet
# #     spec:
# #       imagePullSecrets:
# #         - name: nexus-secret
# #       containers:
# #         - name: rednet
# #           image: 192.168.20.250:8085/2401069/rednet:${IMAGE_TAG}
# #           imagePullPolicy: IfNotPresent
# #           ports:
# #             - containerPort: 3000
# #           env:
# #             - name: NODE_ENV
# #               value: "production"
# #             - name: JWT_SECRET
# #               value: "XmpxMBqyicVFC+y74+VEw+d1SUz3gSxqBWpQ33DNGFs8JOIF99v/Qah3Rr18rVaYUjHu+g3Y5y4WzjzUdkZQvQ=="
# #             - name: NEXT_PUBLIC_SUPABASE_URL
# #               value: "https://nypverxdujpsdnyzktdm.supabase.co"
# #             - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
# #               value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55cHZlcnhkdWpwc2RueXprdGRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MjYyNjgsImV4cCI6MjA2NTIwMjI2OH0.0AlveeXieCvf5umY5JSvErhu96pbVPQwIKXTkIpKB-Q"
# #           resources:
# #             requests:
# #               cpu: "50m"
# #               memory: "128Mi"
# #             limits:
# #               cpu: "500m"
# #               memory: "512Mi"
# # ---
# # apiVersion: v1
# # kind: Service
# # metadata:
# #   name: rednet-service
# #   namespace: "2401069"
# # spec:
# #   type: ClusterIP
# #   selector:
# #     app: rednet
# #   ports:
# #     - protocol: TCP
# #       port: 80
# #       targetPort: 3000
# # ---
# # apiVersion: networking.k8s.io/v1
# # kind: Ingress
# # metadata:
# #   name: rednet-ingress
# #   namespace: "2401069"
# #   annotations:
# #     nginx.ingress.kubernetes.io/rewrite-target: /
# # spec:
# #   ingressClassName: nginx
# #   rules:
# #     - host: 2401069.imcc.com
# #       http:
# #         paths:
# #           - path: /
# #             pathType: Prefix
# #             backend:
# #               service:
# #                 name: rednet-service
# #                 port:
# #                   number: 80

# # apiVersion: v1
# # kind: PersistentVolumeClaim
# # metadata:
# #   name: rednet-static-pvc
# #   namespace: "2401069"
# # spec:
# #   accessModes:
# #     - ReadWriteOnce
# #   resources:
# #     requests:
# #       storage: 1Gi
# # ---
# # apiVersion: apps/v1
# # kind: Deployment
# # metadata:
# #   name: rednet-deployment
# #   namespace: "2401069"
# # spec:
# #   replicas: 1
# #   selector:
# #     matchLabels:
# #       app: rednet
# #   template:
# #     metadata:
# #       labels:
# #         app: rednet
# #     spec:
# #       imagePullSecrets:
# #         - name: nexus-secret
# #       containers:
# #         - name: rednet
# #           image: 127.0.0.1:30085/2401069/rednet:${IMAGE_TAG}
# #           imagePullPolicy: Always
# #           ports:
# #             - containerPort: 3000
# #           env:
# #             - name: NODE_ENV
# #               value: "production"
# #             - name: JWT_SECRET
# #               value: "XmpxMBqyicVFC+y74+VEw+d1SUz3gSxqBWpQ33DNGFs8JOIF99v/Qah3Rr18rVaYUjHu+g3Y5y4WzjzUdkZQvQ=="
# #             - name: NEXT_PUBLIC_SUPABASE_URL
# #               value: "https://nypverxdujpsdnyzktdm.supabase.co"
# #             - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
# #               value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55cHZlcnhkdWpwc2RueXprdGRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MjYyNjgsImV4cCI6MjA2NTIwMjI2OH0.0AlveeXieCvf5umY5JSvErhu96pbVPQwIKXTkIpKB-Q"
# #           readinessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 10
# #             periodSeconds: 10
# #           livenessProbe:
# #             httpGet:
# #               path: /
# #               port: 3000
# #             initialDelaySeconds: 30
# #             periodSeconds: 30
# #           volumeMounts:
# #             - name: static-media
# #               mountPath: /app/public
# #           resources:
# #             requests:
# #               cpu: "500m"
# #               memory: "512Mi"
# #             limits:
# #               cpu: "1"
# #               memory: "1Gi"
# #       volumes:
# #         - name: static-media
# #           persistentVolumeClaim:
# #             claimName: rednet-static-pvc
# # ---
# # apiVersion: v1
# # kind: Service
# # metadata:
# #   name: rednet-service
# #   namespace: "2401069"
# # spec:
# #   selector:
# #     app: rednet
# #   ports:
# #     - protocol: TCP
# #       port: 80
# #       targetPort: 3000
# #   type: ClusterIP
# # ---
# # apiVersion: networking.k8s.io/v1
# # kind: Ingress
# # metadata:
# #   name: rednet-ingress
# #   namespace: "2401069"
# #   annotations:
# #     nginx.ingress.kubernetes.io/rewrite-target: /
# # spec:
# #   ingressClassName: nginx
# #   rules:
# #     - host: 2401069.imcc.com
# #       http:
# #         paths:
# #           - path: /
# #             pathType: Prefix
# #             backend:
# #               service:
# #                 name: rednet-service
# #                 port:
# #                   number: 80


# apiVersion: v1
# kind: PersistentVolumeClaim
# metadata:
#   name: rednet-static-pvc
#   namespace: "2401069"
# spec:
#   accessModes:
#     - ReadWriteOnce
#   resources:
#     requests:
#       storage: 1Gi
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: rednet-deployment
#   namespace: "2401069"
# spec:
#   replicas: 1
#   strategy:
#     type: Recreate
#   selector:
#     matchLabels:
#       app: rednet
#   template:
#     metadata:
#       labels:
#         app: rednet
#     spec:
#       imagePullSecrets:
#         - name: nexus-secret
#       containers:
#         - name: rednet
#           image: nexus-service-for-docker-hosted-registry.nexus.svc.cluster.local:8085/2401069/rednet:${IMAGE_TAG}
#           imagePullPolicy: Always
#           ports:
#             - containerPort: 3000
#           env:
#             - name: NODE_ENV
#               value: "production"
#             - name: JWT_SECRET
#               value: "XmpxMBqyicVFC+y74+VEw+d1SUz3gSxqBWpQ33DNGFs8JOIF99v/Qah3Rr18rVaYUjHu+g3Y5y4WzjzUdkZQvQ=="
#             - name: NEXT_PUBLIC_SUPABASE_URL
#               value: "https://nypverxdujpsdnyzktdm.supabase.co"
#             - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
#               value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55cHZlcnhkdWpwc2RueXprdGRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MjYyNjgsImV4cCI6MjA2NTIwMjI2OH0.0AlveeXieCvf5umY5JSvErhu96pbVPQwIKXTkIpKB-Q"
#           readinessProbe:
#             httpGet:
#               path: /
#               port: 3000
#             initialDelaySeconds: 10
#             periodSeconds: 10
#           livenessProbe:
#             httpGet:
#               path: /
#               port: 3000
#             initialDelaySeconds: 30
#             periodSeconds: 30
#           volumeMounts:
#             - name: static-media
#               mountPath: /app/public
#           resources:
#             requests:
#               cpu: "500m"
#               memory: "512Mi"
#             limits:
#               cpu: "1"
#               memory: "1Gi"
#       volumes:
#         - name: static-media
#           persistentVolumeClaim:
#             claimName: rednet-static-pvc
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: rednet-service
#   namespace: "2401069"
# spec:
#   selector:
#     app: rednet
#   ports:
#     - protocol: TCP
#       port: 80
#       targetPort: 3000
#   type: ClusterIP
# ---
# apiVersion: networking.k8s.io/v1
# kind: Ingress
# metadata:
#   name: rednet-ingress
#   namespace: "2401069"
#   annotations:
#     nginx.ingress.kubernetes.io/rewrite-target: /
# spec:
#   ingressClassName: nginx
#   rules:
#     - host: 2401069.imcc.com
#       http:
#         paths:
#           - path: /
#             pathType: Prefix
#             backend:
#               service:
#                 name: rednet-service
#                 port:
#                   number: 80

apiVersion: apps/v1
kind: Deployment
metadata:
  name: rednet-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: rednet
  template:
    metadata:
      labels:
        app: rednet
    spec:
      containers:
        - name: rednet
          image: nexus-service-for-docker-hosted-registry.nexus.svc.cluster.local:8085/2401069/rednet:IMAGE_TAG
          ports:
            - containerPort: 3000
          env:
            - name: NEXT_PUBLIC_SUPABASE_URL
              valueFrom:
                secretKeyRef:
                  name: supabase-secrets
                  key: NEXT_PUBLIC_SUPABASE_URL

            - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
              valueFrom:
                secretKeyRef:
                  name: supabase-secrets
                  key: NEXT_PUBLIC_SUPABASE_ANON_KEY


